{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/serenitysz/schema/main/1.0.0.json",
    "title": "Serenity",
    "description": "Serenity configuration to use in the serenity.json file.",
    "type": "object",
    "definitions": {
        "enabledOption": {
            "default": true,
            "type": "boolean",
            "description": "Whether the option(s) is/are enabled or not."
        },
        "baserule": {
            "type": "object",
            "properties": {
                "severity": {
                    "type": "string",
                    "default": "warn",
                    "enum": ["off", "info", "warn", "error"],
                    "description": "The severity of the rule that will be issued for the issue."
                }
            },
            "required": ["severity"]
        },
        "pattern-rule": {
            "allOf": [
                {
                    "$ref": "#/definitions/baserule"
                },
                {
                    "type": "object",
                    "properties": {
                        "pattern": {
                            "type": "string",
                            "description": "The pattern (regexp) to use in this rule."
                        }
                    }
                }
            ]
        },
        "max-based-rule": {
            "allOf": [
                {
                    "$ref": "#/definitions/baserule"
                },
                {
                    "type": "object",
                    "properties": {
                        "max": {
                            "minimum": 0,
                            "type": "integer",
                            "description": "Max size/value for the option."
                        }
                    }
                }
            ]
        }
    },
    "properties": {
        "extends": {
            "default": [],
            "type": "array",
            "items": {
                "minLength": 3,
                "type": "string"
            },
            "description": "Array of paths. Serenity will resolve it and extends with the current configuration file."
        },
        "git": {
            "type": "object",
            "required": ["use"],
            "properties": {
                "use": {
                    "$ref": "#/definitions/enabledOption"
                },
                "ignore": {
                    "default": true,
                    "type": "boolean",
                    "description": "Whether Serenity should respect .gitignore files (Including nested ones)."
                },
                "changedOnly": {
                    "default": false,
                    "type": "boolean",
                    "description": "Run checks only on files changed compared to the base branch."
                },
                "stagedOnly": {
                    "default": false,
                    "type": "boolean",
                    "description": "Run checks only on staged files (useful for pre-commit hooks)."
                },
                "branch": {
                    "minLength": 1,
                    "type": "string",
                    "default": "main",
                    "description": "Base branch used to determine changed files when changedOnly is enabled."
                },
                "root": {
                    "minLength": 1,
                    "type": "string",
                    "description": "Root directory where Serenity should look for the Git repository. Defaults to the configuration file directory."
                }
            },
            "additionalProperties": false,
            "description": "Git integration settings. When enabled, Serenity can respect .gitignore files and limit checks to changed or staged files."
        },
        "go": {
            "type": "object",
            "properties": {
                "exclude": {
                    "default": [],
                    "type": "array",
                    "items": {
                        "minLength": 3,
                        "type": "string"
                    },
                    "description": "Array of paths to ignore when running checks."
                },
                "maxFileSize": {
                    "default": 0,
                    "minimum": 0,
                    "type": "integer",
                    "description": "Maximum allowed file size in bytes. 0 means unlimited."
                }
            },
            "description": "Go-specific settings for go files."
        },
        "performance": {
            "type": "object",
            "required": ["use"],
            "properties": {
                "use": {
                    "$ref": "#/definitions/enabledOption"
                },
                "threads": {
                    "minimum": 0,
                    "default": 0,
                    "type": "integer",
                    "description": "Number of concurrent threads to use. 0 means auto."
                },
                "caching": {
                    "default": true,
                    "type": "boolean",
                    "description": "Cache lint results for faster subsequent runs."
                }
            },
            "description": "Performance options."
        },
        "assistance": {
            "type": "object",
            "required": ["use"],
            "properties": {
                "use": {
                    "$ref": "#/definitions/enabledOption"
                },
                "autofix": {
                    "default": false,
                    "type": "boolean",
                    "description": "Automatically apply fixes when possible."
                }
            },
            "description": "Editor assistance and hints."
        },
        "linter": {
            "type": "object",
            "required": ["use", "rules"],
            "properties": {
                "use": {
                    "$ref": "#/definitions/enabledOption"
                },
                "issues": {
                    "type": "object",
                    "properties": {
                        "use": {
                            "$ref": "#/definitions/enabledOption"
                        },
                        "max": {
                            "minimum": 0,
                            "default": 15,
                            "type": "integer",
                            "description": "Maximum number of issues to report. 0 means unlimited."
                        }
                    },
                    "required": ["use", "max"],
                    "description": "Linter issues options."
                },
                "rules": {
                    "type": "object",
                    "properties": {
                        "recommended": {
                            "default": true,
                            "type": "boolean",
                            "description": "Enable ALL recommended rules for ALL groups."
                        },
                        "errors": {
                            "type": "object",
                            "required": ["use"],
                            "properties": {
                                "use": {
                                    "$ref": "#/definitions/enabledOption"
                                },
                                "noErrorShadowing": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Disallow shadowing of error variables, which can hide failures and lead to subtle bugs."
                                },
                                "errorStringFormat": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Enforce Go error string conventions, such as lowercase messages without punctuation or formatting."
                                },
                                "errorNotWrapped": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Ensure returned errors are properly wrapped when propagating them, preserving context and enabling error inspection."
                                }
                            },
                            "description": "Focused on rules that enforce the best practices to use or handle an error."
                        },
                        "imports": {
                            "type": "object",
                            "required": ["use"],
                            "properties": {
                                "use": {
                                    "$ref": "#/definitions/enabledOption"
                                },
                                "redundantImportAlias": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Detect import aliases that repeat the package name unnecessarily."
                                },
                                "noDotImports": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Disallow dot-imports (import . \"pkg\"), which pollute the local namespace and make code harder to read, reason about, and refactor."
                                },
                                "disallowedPackages": {
                                    "allOf": [
                                        {
                                            "$ref": "#/definitions/baserule"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "packages": {
                                                    "default": [],
                                                    "minItems": 1,
                                                    "type": "array",
                                                    "items": {
                                                        "minimum": 1,
                                                        "minLength": 1,
                                                        "type": "string"
                                                    },
                                                    "description": "Array of packages path name (e.g. \"math\")."
                                                }
                                            },
                                            "required": ["packages"]
                                        }
                                    ],
                                    "description": "Disallow the usage of specific packages defined in the packages array. This rule checks only the import path, ignoring aliases."
                                }
                            },
                            "description": "Focused on go imports."
                        },
                        "bestPractices": {
                            "type": "object",
                            "required": ["use"],
                            "properties": {
                                "use": {
                                    "$ref": "#/definitions/enabledOption"
                                },
                                "simplifyBooleanReturn": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Detect unnecessary if-else statements that return or assign boolean values and suggest a direct return or assignment for clearer, more idiomatic code."
                                },
                                "getMustReturnValue": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Enforce that functions prefixed with Get return at least one non-error value, aligning with common Go naming expectations."
                                },
                                "preferEarlyReturn": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Encourage early returns to reduce nesting and improve code readability, avoiding unnecessary if-else blocks."
                                },
                                "redundantErrorCheck": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Detect redundant if statements that check an error only to immediately return it, encouraging more direct and idiomatic returns."
                                },
                                "noDeferInLoop": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Prevent the use of \"defer\" keyword inside loops, which can lead to excessive memory usage and unexpected execution order."
                                },
                                "useContextInFirstParam": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Enforce \"context.Context\" to be the first parameter of functions and methods that accept a context, following Go conventions."
                                },
                                "noBareReturns": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Disallow bare return statements in functions with named return values, improving readability and reducing hidden control flow."
                                },
                                "noMagicNumbers": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Discourage the use of unexplained numeric literals, encouraging named constants to improve clarity and maintainability."
                                },
                                "useSliceCapacity": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Encourage explicit slice capacity initialization when the final size is known, improving performance and reducing allocations."
                                },
                                "avoidEmptyStructs": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Prevent the use of empty structs where they provide no semantic or performance benefit."
                                },
                                "alwaysPreferConst": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Prefer \"const\" over \"var\" when a value is immutable, improving safety and intent clarity."
                                }
                            },
                            "description": "Focused on rules that enforce the best practices of a code."
                        },
                        "correctness": {
                            "type": "object",
                            "required": ["use"],
                            "properties": {
                                "use": {
                                    "$ref": "#/definitions/enabledOption"
                                },
                                "unusedReceiver": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Detect methods whose receiver is never used, indicating unnecessary method definitions or incorrect design."
                                },
                                "unusedParams": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Detect function or method parameters that are never used, reducing noise and potential confusion."
                                },
                                "emptyBlock": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Detect empty code blocks (e.g. if, for, switch) that have no effect and likely indicate unfinished or dead code."
                                },
                                "boolLiteralExpressions": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Prevent the use of boolean literals in logic expressions that make the code less readable."
                                },
                                "ambiguousReturns": {
                                    "allOf": [
                                        {
                                            "$ref": "#/definitions/baserule"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "maxUnnamedSameType": {
                                                    "default": 1,
                                                    "minimum": 1,
                                                    "type": "integer",
                                                    "description": "Maximum number of unnamed return values of the same type allowed."
                                                }
                                            }
                                        }
                                    ],
                                    "description": "Detect functions or methods that return multiple unnamed values of the same type, which can easily lead to misordered assignments and subtle bugs."
                                }
                            },
                            "description": "Focused on code that is incorrect or useless."
                        },
                        "complexity": {
                            "type": "object",
                            "required": ["use"],
                            "properties": {
                                "use": {
                                    "$ref": "#/definitions/enabledOption"
                                },
                                "maxFuncLines": {
                                    "$ref": "#/definitions/max-based-rule",
                                    "description": "Limit the maximum number of lines per function to encourage smaller, more focused units of code."
                                },
                                "maxNestingDepth": {
                                    "$ref": "#/definitions/max-based-rule",
                                    "description": "Restrict excessive nesting of control structures to improve readability and reduce cognitive load."
                                },
                                "cyclomaticComplexity": {
                                    "$ref": "#/definitions/max-based-rule",
                                    "description": "Enforce an upper bound on cyclomatic complexity to prevent overly complex and hard-to-test logic."
                                }
                            },
                            "description": "Focused on avoid unnecessary code complexity."
                        },
                        "style": {
                            "type": "object",
                            "required": ["use"],
                            "properties": {
                                "use": {
                                    "$ref": "#/definitions/enabledOption"
                                },
                                "preferIncDec": {
                                    "$ref": "#/definitions/baserule",
                                    "description": "Prefer the ++ and -- operators over += 1 and -= 1 for clearer and more idiomatic code."
                                },
                                "maxLineLength": {
                                    "$ref": "#/definitions/max-based-rule",
                                    "description": "Warn when lines exceed a configured maximum length, helping maintain readability and consistent formatting."
                                },
                                "packageComments": {
                                    "allOf": [
                                        {
                                            "$ref": "#/definitions/baserule"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "requireTopOfFile": {
                                                    "default": true,
                                                    "type": "boolean",
                                                    "description": "Require the package comment to appear immediately before the package declaration."
                                                }
                                            }
                                        }
                                    ],
                                    "description": "Ensure packages are properly documented with comments attached to the package declaration."
                                },
                                "commentSpacing": {
                                    "allOf": [
                                        {
                                            "$ref": "#/definitions/baserule"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "exceptions": {
                                                    "default": [],
                                                    "type": "array",
                                                    "items": { "type": "string" },
                                                    "description": "List of comment prefixes allowed without a space after //."
                                                }
                                            }
                                        }
                                    ],
                                    "description": "Enforce a space after comment markers (//) to improve readability and follow Go style conventions."
                                },
                                "fileHeader": {
                                    "allOf": [
                                        {
                                            "$ref": "#/definitions/baserule"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "header": {
                                                    "type": "string",
                                                    "description": "Required file header content."
                                                },
                                                "allowShebang": {
                                                    "type": "boolean",
                                                    "default": true,
                                                    "description": "Allow shebang lines before the header."
                                                }
                                            },
                                            "required": ["header"]
                                        }
                                    ],
                                    "description": "Ensure all source files contain a standardized header, improving consistency and meeting legal or organizational requirements."
                                }
                            },
                            "description": "Focused on code style."
                        },
                        "naming": {
                            "type": "object",
                            "required": ["use"],
                            "properties": {
                                "use": {
                                    "$ref": "#/definitions/enabledOption"
                                },
                                "receiverNames": {
                                    "allOf": [
                                        {
                                            "$ref": "#/definitions/baserule"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "maxSize": {
                                                    "default": 1,
                                                    "minimum": 1,
                                                    "type": "integer",
                                                    "description": "Maximum allowed length for the receiver name."
                                                }
                                            },
                                            "required": ["maxSize"]
                                        }
                                    ],
                                    "description": "Enforce short and consistent receiver names by limiting their maximum length. Helps keep method signatures readable and idiomatic."
                                },
                                "exportedIdentifiers": {
                                    "$ref": "#/definitions/pattern-rule",
                                    "description": "Enforce a naming pattern for exported identifiers, ensuring consistency, clarity, and adherence to project conventions."
                                },
                                "importedIdentifiers": {
                                    "$ref": "#/definitions/pattern-rule",
                                    "description": "Enforce a naming pattern for imported identifiers and aliases, preventing unclear or misleading names."
                                },
                                "bannedChars": {
                                    "allOf": [
                                        {
                                            "$ref": "#/definitions/baserule"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "chars": {
                                                    "type": "array",
                                                    "items": {
                                                        "minLength": 1,
                                                        "type": "string"
                                                    },
                                                    "minItems": 1,
                                                    "description": "Array of characteres that are banned in identifiers (Min 1.)"
                                                }
                                            },
                                            "required": ["chars"]
                                        }
                                    ],
                                    "description": "Control the banned characteres in identifiers (func, var, const). Comments are not supported."
                                }
                            },
                            "description": "Focused on names or identifier errors."
                        }
                    },
                    "description": "All linting rules grouped by category."
                }
            },
            "description": "Linting options and rules."
        }
    },
    "required": ["linter"]
}
